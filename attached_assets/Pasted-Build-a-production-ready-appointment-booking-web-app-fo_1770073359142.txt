Build a production-ready appointment booking web app for “El Don Barber Shop” (Spanish LatAm, ARS formatting like $8.000). Stack: Next.js App Router + TS + Tailwind + shadcn/ui + Supabase (@supabase/supabase-js). MUST be real product (no localStorage for core data). Use env vars NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. Public route “/” lets clients book: choose service -> pick date -> pick available time slot -> enter name + WhatsApp (digits 10-13) -> confirm. Show only available slots. Default business hours: Tue-Sat 10:00-20:00, Sun+Mon closed. Services seeded: (1) Corte de Pelo price_ars 8000 duration_min 30, (2) Mechas price_ars 20000 duration_min 90. Prevent double booking at DB level with UNIQUE(shop_id,date,start_time). If insert fails due to unique, show error “Ese horario ya fue reservado, elegí otro”. After booking show success summary + generate downloadable .ics (calendar) + WhatsApp message (wa.me) + “Contactar por WhatsApp” button to barber phone constant +54 9 341 000 0000 (easy to change). Include Ubicación section with address placeholder and maps_embed_url from DB. Admin route “/admin” must use Supabase Auth email/password (no hardcoded password). If not logged, show login; if logged, show dashboard: view appointments, filter by status, mark completed/cancelled, block/unblock slots (with reason), edit services (name, price_ars, duration_min, is_active), edit business hours per weekday, edit shop info (name, phone, address, maps_embed_url), export CSV of appointments. Multi-tenant ready via shop_id, but seed 1 shop: name “El Don Barber Shop”, slug “el-don”. Provide full Supabase SQL (schema+seed+RLS policies) and all Next.js files required. DB tables: shops(id uuid pk default gen_random_uuid(),name,slug unique,phone,address,maps_embed_url,created_at); services(id uuid pk default gen_random_uuid(),shop_id fk, name, price_ars int, duration_min int, is_active bool default true, created_at); business_hours(id uuid pk default gen_random_uuid(),shop_id fk,weekday smallint 0-6,is_open bool,open_time text HH:MM,close_time text HH:MM, unique(shop_id,weekday)); appointments(id uuid pk default gen_random_uuid(),shop_id fk,service_id fk,customer_name,customer_whatsapp,date,start_time,end_time,status text default 'booked' (booked|completed|cancelled),created_at, UNIQUE(shop_id,date,start_time)); blocked_slots(id uuid pk default gen_random_uuid(),shop_id fk,date,start_time,reason, UNIQUE(shop_id,date,start_time)); admin_users(user_id uuid pk references auth.users, shop_id uuid fk). RLS: enable on all tables. Public (anon) can SELECT shops by slug and SELECT services/business_hours/blocked_slots for that shop, and INSERT appointments (only for that shop). Authenticated admins can CRUD services/business_hours/blocked_slots/appointments/shops but only where admin_users.shop_id = table.shop_id. Choose simplest robust binding user->shop via admin_users table and policies using auth.uid(). Keep UI minimal black/white, responsive, accessible, subtle animations, clean typed code, proper error handling. Output: 1) single SQL block for Supabase; 2) all updated/created Next.js code files. Do not give a plan; deliver final code.
